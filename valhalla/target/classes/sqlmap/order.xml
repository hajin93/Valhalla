<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 맵핑될 DAO 인터페이스의 Full name 을 줍니다. -->
<mapper namespace="orderDAO">

   <!-- id 속성은 DAO 의 메소드와 같아야 한다. 여기의 orderVO 는 mybatis-confg.xml 에 Alias 되어 있습니다. -->
   
   <!-- 카트안에 가지고 들어가는 정보 -->
   <insert id="put" parameterType="orderVo">
      INSERT INTO cart (
      	cart_no,
        product_no,
        product_name,
        product_price,
        product_size,
        product_color,
        main_img,
        quantity,
        total_price,
        user_no
      ) VALUES(
         (SELECT NVL(MAX(TO_NUMBER(CART_NO)),0)+1 FROM CART),
         #{productNo},
         #{productName},
         #{productPrice},
         #{productSize},
         #{productColor},
         #{mainImg},
         #{quantity},
         #{totalPrice},
         #{userNo}
      )
   </insert>
   
    <insert id="wishput" parameterType="orderVo">
      INSERT INTO WISHLIST (
      	wish_no,
      	user_no,
        product_no,
        product_name,
        product_price,
        product_size,
        product_color,
        main_img 
      ) VALUES(
         (SELECT NVL(MAX(TO_NUMBER(WISH_NO)),0)+1 FROM wishlist),
         #{userNo},
         #{productNo},
         #{productName},
         #{productPrice},
         #{productSize},
         #{productColor},
         #{mainImg}  
      )
   </insert>
   
   <select id="wishList" parameterType="orderVo" resultType="orderVo">
   SELECT * FROM WISHLIST
   WHERE USER_NO = #{userNo}
   </select>
   
   <select id="basketList" parameterType="orderVo" resultType="orderVo">
   SELECT B.*, A.STOCKQUANTITY 
     FROM PRODUCT A, CART B
    WHERE A.PRODUCT_NO = B.PRODUCT_NO
      AND USER_NO = #{userNo}
   </select>
   
</mapper>